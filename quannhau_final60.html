<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Qu√°n Nh·∫≠u Hai Anh Em</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0b0f13;
  --panel:#0f1720;
  --accent:#f6c84c;
  --muted:#9aa4ad;
  --card:#0b1317;
  --glass:rgba(255,255,255,0.03);
}
*{box-sizing:border-box}
body{font-family:Inter,system-ui,Arial,sans-serif;margin:0;background:linear-gradient(180deg,#050609 0%, #0b0f13 100%);color:#fff;min-height:100vh}
.header{display:flex;align-items:center;justify-content:space-between;padding:18px 22px;border-bottom:1px solid rgba(255,255,255,0.03)}
.brand{display:flex;align-items:center;gap:14px}
.logo{width:64px;height:64px;border-radius:50%;background:linear-gradient(135deg,#ffd36b,#ff9a00);display:flex;align-items:center;justify-content:center;box-shadow:0 6px 18px rgba(0,0,0,0.5)}
.logo svg{width:36px;height:36px}
.title{font-size:18px;font-weight:700}
.subtitle{font-size:13px;color:var(--muted)}
.controls{display:flex;gap:12px;align-items:center}
.search{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:8px 10px;border-radius:8px;color:var(--muted);min-width:220px}
.tabbar{display:flex;gap:8px;padding:16px 22px;overflow:auto}
.tab{padding:8px 12px;border-radius:10px;background:transparent;border:1px solid rgba(255,255,255,0.02);color:var(--muted);cursor:pointer}
.tab.active{background:linear-gradient(90deg, rgba(246,200,76,0.12), rgba(246,200,76,0.06));border-color:rgba(246,200,76,0.18);color:var(--accent);font-weight:600}
.container{display:grid;grid-template-columns:1fr 360px;gap:20px;padding:18px 22px;max-width:1200px;margin:0 auto}
.panel{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,0.02)}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:14px}
.card{background:var(--card);border-radius:10px;overflow:hidden;border:1px solid var(--glass);box-shadow:0 8px 24px rgba(0,0,0,0.6);transition:transform .16s,box-shadow .16s}
.card:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(0,0,0,0.7)}
.card img{width:100%;height:140px;object-fit:cover;display:block}
.card-body{padding:10px}
.dish-name{font-weight:600;color:#fff;margin-bottom:6px}
.dish-cat{font-size:12px;color:var(--muted);margin-bottom:8px}
.row{display:flex;justify-content:space-between;align-items:center;gap:8px}
.price{color:var(--accent);font-weight:700}
.btn{background:var(--accent);color:#111;border:none;padding:8px 10px;border-radius:8px;cursor:pointer;font-weight:700}
.cart{position:sticky;top:20px;background:linear-gradient(180deg,#071026,#071428);padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)}
.cart h3{margin:0 0 8px 0}
.cart-list{max-height:360px;overflow:auto;margin-bottom:8px;padding-right:6px}
.cart-item{display:flex;justify-content:space-between;align-items:center;padding:8px;border-radius:8px;background:rgba(255,255,255,0.01);margin-bottom:8px}
.qty{display:flex;gap:6px;align-items:center}
.small{font-size:13px;color:var(--muted)}
.total{font-weight:800;color:var(--accent);text-align:right;margin-top:8px}
.footer{padding:16px;text-align:center;color:var(--muted);font-size:14px}
.badge{background:rgba(0,0,0,0.25);border-radius:8px;padding:6px 8px;color:var(--muted);font-size:13px}
.music-toggle{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:8px;border-radius:8px;color:var(--muted);cursor:pointer}
.modal{position:fixed;left:0;top:0;right:0;bottom:0;background:rgba(0,0,0,0.6);display:flex;align-items:center;justify-content:center;z-index:60}
.modal-card{background:#08111a;border-radius:10px;max-width:900px;width:96%;display:flex;gap:12px;overflow:hidden;border:1px solid rgba(255,255,255,0.04)}
.modal-card img{width:50%;height:100%;object-fit:cover}
.modal-body{padding:16px;flex:1}
.close{background:transparent;border:0;color:var(--muted);cursor:pointer}
@media(max-width:980px){.container{grid-template-columns:1fr;padding:12px}.cart{position:relative;top:0;width:100%}}
</style>
</head>
<body>
<header class="header">
  <div class="brand">
    <div class="logo" aria-hidden="true">
      <!-- simple beer cheers SVG -->
      <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g transform="translate(6,6)">
          <path d="M10 2c0 1.1-.9 2-2 2S6 3.1 6 2" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" opacity="0.9"/>
          <g transform="translate(6,0)" >
            <rect x="2" y="6" width="9" height="18" rx="2" fill="#fff" opacity="0.9"/>
            <rect x="14" y="6" width="9" height="18" rx="2" fill="#fff" opacity="0.9"/>
            <path d="M3 6c0-3 3-4 6-4s6 1 6 4" fill="#ffd36b"/>
          </g>
        </g>
      </svg>
    </div>
    <div>
      <div class="title">Qu√°n Nh·∫≠u Hai Anh Em</div>
      <div class="subtitle">S·ªëng t·ª± do ‚Äî th·ª©c ƒÉn chu·∫©n v·ªã ¬∑ Bia l·∫°nh ¬∑ G·ªçi l√† c√≥</div>
    </div>
  </div>

  <div class="controls">
    <input id="search" class="search" placeholder="T√¨m m√≥n, v√≠ d·ª•: g√†, l·∫©u, bia..." />
    <button class="music-toggle" id="musicToggle">üéµ Nh·∫°c: T·∫Øt</button>
  </div>
</header>

<nav class="tabbar panel" id="tabs">
  <div class="tab active" data-tab="viet">üáªüá≥ M√≥n Vi·ªát</div>
  <div class="tab" data-tab="thai">üáπüá≠ M√≥n Th√°i</div>
  <div class="tab" data-tab="trung">üá®üá≥ M√≥n Trung</div>
  <div class="tab" data-tab="drink">üç∫ ƒê·ªì u·ªëng</div>
  <div class="badge" style="margin-left:auto">Hotline: 0357 995 895</div>
</nav>

<div class="container">
  <section class="panel">
    <div id="menuGrid" class="grid"></div>
  </section>

  <aside class="cart panel">
    <h3>üßæ Gi·ªè h√†ng</h3>
    <div class="cart-list" id="cartList"></div>
    <div class="small">Ghi ch√∫</div>
    <textarea id="note" style="width:100%;margin-top:6px;padding:8px;border-radius:6px;background:#061218;border:1px solid rgba(255,255,255,0.02);color:#fff" rows="2" placeholder="V√≠ d·ª•: √≠t cay, th√™m rau..."></textarea>
    <div class="total" id="totalPrice">T·ªïng: 0‚Ç´</div>
    <div style="display:flex;gap:8px;margin-top:10px">
      <button class="btn" onclick="checkout()">ƒê·∫∑t h√†ng</button>
      <button class="btn" style="background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted)" onclick="clearCart()">Xo√°</button>
    </div>
    <div style="margin-top:10px;font-size:13px;color:var(--muted)">Qu√°n Nh·∫≠u Hai Anh Em ¬∑ Hotline: 0357 995 895</div>
  </aside>
</div>

<footer class="footer panel">
  ¬© Qu√°n Nh·∫≠u Hai Anh Em ‚Äî Li√™n h·ªá: 0357 995 895 ¬∑ M·ªü c·ª≠a 16:00 - 24:00
</footer>

<!-- modal -->
<div id="modal" style="display:none" class="modal" aria-hidden="true">
  <div class="modal-card">
    <img id="modalImg" src="" alt="">
    <div class="modal-body">
      <button class="close" onclick="closeModal()">‚úñ</button>
      <h3 id="modalTitle"></h3>
      <div class="small" id="modalCat"></div>
      <p id="modalDesc" style="margin-top:8px;color:var(--muted)"></p>
      <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px">
        <div class="price" id="modalPrice" style="color:var(--accent);font-weight:800"></div>
        <div style="display:flex;gap:8px;align-items:center">
          <button class="btn" id="modalAdd">Th√™m v√†o gi·ªè</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- audio (music) -->
<audio id="bgAudio" loop crossorigin="anonymous">
  <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
  Your browser does not support the audio element.
</audio>

<script>
// Data: 60 items (20 Vi·ªát,15 Th√°i,15 Trung,10 Drinks)
const items = [
  // 20 Vi·ªát
  {id:1,name:"G√† n∆∞·ªõng mu·ªëi ·ªõt",cat:"viet",price:120000,img:"https://picsum.photos/seed/ga1/800/600",desc:"G√† n∆∞·ªõng th∆°m, da gi√≤n, v·ªã mu·ªëi ·ªõt ƒë·∫≠m ƒë√†."},
  {id:2,name:"B√≤ l√∫c l·∫Øc",cat:"viet",price:150000,img:"https://picsum.photos/seed/bo1/800/600",desc:"Th·ªãt b√≤ m·ªÅm, s·ªët ti√™u ƒë·∫∑c tr∆∞ng."},
  {id:3,name:"C√° l√≥c n∆∞·ªõng trui",cat:"viet",price:140000,img:"https://picsum.photos/seed/ca1/800/600",desc:"C√° l√≥c t∆∞∆°i n∆∞·ªõng gi√≤n, ƒÉn k√®m rau s·ªëng."},
  {id:4,name:"C√°nh g√† chi√™n n∆∞·ªõc m·∫Øm",cat:"viet",price:90000,img:"https://picsum.photos/seed/canhga1/800/600",desc:"C√°nh g√† gi√≤n r·ª•m, m·∫∑n ng·ªçt v·ª´a ƒÉn."},
  {id:5,name:"T√¥m rang me",cat:"viet",price:130000,img:"https://picsum.photos/seed/tom1/800/600",desc:"T√¥m t∆∞∆°i rang s·ªët me chua ng·ªçt."},
  {id:6,name:"L·∫©u m·∫Øm mi·ªÅn T√¢y",cat:"viet",price:270000,img:"https://picsum.photos/seed/lau1/800/600",desc:"L·∫©u m·∫Øm chu·∫©n v·ªã mi·ªÅn T√¢y, ƒë·∫≠m ƒë√†."},
  {id:7,name:"·∫æch x√†o lƒÉn",cat:"viet",price:120000,img:"https://picsum.photos/seed/ech1/800/600",desc:"·∫æch th∆°m v·ªã s·∫£ ·ªõt, ƒë·∫≠m ƒë√†."},
  {id:8,name:"G·ªèi ng√≥ sen t√¥m th·ªãt",cat:"viet",price:95000,img:"https://picsum.photos/seed/goi1/800/600",desc:"G·ªèi t∆∞∆°i m√°t, chua ng·ªçt h√†i ho√†."},
  {id:9,name:"Ngh√™u h·∫•p s·∫£",cat:"viet",price:90000,img:"https://picsum.photos/seed/ngheu1/800/600",desc:"Ngh√™u t∆∞∆°i h·∫•p s·∫£ th∆°m ph·ª©c."},
  {id:10,name:"B√∫n ri√™u cua",cat:"viet",price:95000,img:"https://picsum.photos/seed/bun1/800/600",desc:"B√∫n ri√™u ƒë·∫≠m v·ªã, nhi·ªÅu cua."},
  {id:11,name:"S∆∞·ªùn n∆∞·ªõng m·∫≠t ong",cat:"viet",price:160000,img:"https://picsum.photos/seed/suon1/800/600",desc:"S∆∞·ªùn m·ªÅm, s·ªët m·∫≠t ong th∆°m."},
  {id:12,name:"L√≤ng x√†o d∆∞a",cat:"viet",price:85000,img:"https://picsum.photos/seed/long1/800/600",desc:"L√≤ng x√†o d∆∞a chua, th∆°m ngon."},
  {id:13,name:"M·ª±c chi√™n gi√≤n",cat:"viet",price:100000,img:"https://picsum.photos/seed/muc1/800/600",desc:"M·ª±c t·∫©m b·ªôt chi√™n gi√≤n r·ª•m."},
  {id:14,name:"B√≤ n∆∞·ªõng l√° l·ªët",cat:"viet",price:125000,img:"https://picsum.photos/seed/bonuot1/800/600",desc:"B√≤ th∆°m l√° l·ªët, ƒÉn k√®m rau."},
  {id:15,name:"C√° chi√™n m·∫Øm",cat:"viet",price:98000,img:"https://picsum.photos/seed/cachien1/800/600",desc:"C√° chi√™n v√†ng r·ª•m, s·ªët m·∫Øm ƒë·∫∑c bi·ªát."},
  {id:16,name:"G√† h·∫•p h√†nh",cat:"viet",price:110000,img:"https://picsum.photos/seed/gahap1/800/600",desc:"G√† h·∫•p h√†nh m·ªÅm, ng·ªçt th·ªãt."},
  {id:17,name:"B√°nh tr√°ng tr·ªôn",cat:"viet",price:45000,img:"https://picsum.photos/seed/banhtrang1/800/600",desc:"Snack v·ªã ƒë·∫∑c tr∆∞ng, ƒÉn li·ªÅn."},
  {id:18,name:"H·∫øn x√†o x√∫c b√°nh ƒëa",cat:"viet",price:90000,img:"https://picsum.photos/seed/hen1/800/600",desc:"H·∫øn x√†o th∆°m, ƒÉn k√®m b√°nh ƒëa."},
  {id:19,name:"T√¥m n∆∞·ªõng b∆° t·ªèi",cat:"viet",price:140000,img:"https://picsum.photos/seed/tom2/800/600",desc:"T√¥m n∆∞·ªõng b∆° t·ªèi th∆°m l·ª´ng."},
  {id:20,name:"S·ª•n g√† rang mu·ªëi",cat:"viet",price:70000,img:"https://picsum.photos/seed/sun1/800/600",desc:"S·ª•n g√† gi√≤n, h·ª£p nh·∫≠u."},

  // 15 Th√°i
  {id:21,name:"Tom Yum Goong",cat:"thai",price:160000,img:"https://picsum.photos/seed/tomyum1/800/600",desc:"Canh Tom Yum chua cay h·∫£i s·∫£n."},
  {id:22,name:"G·ªèi ƒëu ƒë·ªß Th√°i",cat:"thai",price:85000,img:"https://picsum.photos/seed/goithai1/800/600",desc:"G·ªèi ƒëu ƒë·ªß gi√≤n, cay n·ªìng."},
  {id:23,name:"G√† n∆∞·ªõng Th√°i",cat:"thai",price:120000,img:"https://picsum.photos/seed/gatha1/800/600",desc:"G√† ∆∞·ªõp gia v·ªã Th√°i, n∆∞·ªõng th∆°m."},
  {id:24,name:"C√° chi√™n s·ªët me Th√°i",cat:"thai",price:150000,img:"https://picsum.photos/seed/cathai1/800/600",desc:"C√° chi√™n s·ªët me chua ng·ªçt."},
  {id:25,name:"T√¥m chi√™n chanh d√¢y",cat:"thai",price:140000,img:"https://picsum.photos/seed/tomthai1/800/600",desc:"T√¥m chi√™n ph·ªß s·ªët chanh d√¢y."},
  {id:26,name:"L·∫©u Th√°i h·∫£i s·∫£n",cat:"thai",price:300000,img:"https://picsum.photos/seed/lauthai1/800/600",desc:"L·∫©u Th√°i cay n·ªìng, nhi·ªÅu h·∫£i s·∫£n."},
  {id:27,name:"Mi·∫øn x√†o Th√°i",cat:"thai",price:90000,img:"https://picsum.photos/seed/mienthai1/800/600",desc:"Mi·∫øn x√†o ƒë·∫≠m v·ªã Th√°i."},
  {id:28,name:"M·ª±c n∆∞·ªõng sa t·∫ø Th√°i",cat:"thai",price:130000,img:"https://picsum.photos/seed/mucthai1/800/600",desc:"M·ª±c n∆∞·ªõng sa t·∫ø cay n·ªìng."},
  {id:29,name:"Canh chua t√¥m Th√°i",cat:"thai",price:120000,img:"https://picsum.photos/seed/cancthai1/800/600",desc:"Canh chua t√¥m th∆°m v·ªã Th√°i."},
  {id:30,name:"G·ªèi h·∫£i s·∫£n chua cay",cat:"thai",price:110000,img:"https://picsum.photos/seed/gh1/800/600",desc:"G·ªèi h·∫£i s·∫£n chua cay, t∆∞∆°i ngon."},
  {id:31,name:"Th·ªãt b√≤ x√†o l√° chanh",cat:"thai",price:140000,img:"https://picsum.photos/seed/bochai1/800/600",desc:"B√≤ x√†o l√° chanh th∆°m m√°t."},
  {id:32,name:"C∆°m chi√™n Th√°i",cat:"thai",price:80000,img:"https://picsum.photos/seed/comthai1/800/600",desc:"C∆°m chi√™n th·∫≠p c·∫©m ki·ªÉu Th√°i."},
  {id:33,name:"G√† chi√™n n∆∞·ªõc m·∫Øm Th√°i",cat:"thai",price:90000,img:"https://picsum.photos/seed/gachi1/800/600",desc:"G√† chi√™n n∆∞·ªõc m·∫Øm v·ªã Th√°i."},
  {id:34,name:"C√°nh g√† n∆∞·ªõng m·∫≠t ong Th√°i",cat:"thai",price:95000,img:"https://picsum.photos/seed/canhtha1/800/600",desc:"C√°nh g√† n∆∞·ªõng m·∫≠t ong th∆°m."},
  {id:35,name:"Heo xi√™n n∆∞·ªõng Th√°i",cat:"thai",price:85000,img:"https://picsum.photos/seed/heothai1/800/600",desc:"Xi√™n n∆∞·ªõng th∆°m, ch·∫•m s·ªët ƒë·∫∑c bi·ªát."},

  // 15 Trung
  {id:36,name:"V·ªãt quay B·∫Øc Kinh",cat:"trung",price:320000,img:"https://picsum.photos/seed/vit1/800/600",desc:"V·ªãt quay gi√≤n da, th·ªãt m·ªÅm."},
  {id:37,name:"ƒê·∫≠u ph·ª• Mapo",cat:"trung",price:110000,img:"https://picsum.photos/seed/mapo1/800/600",desc:"ƒê·∫≠u ph·ª• cay t·ª© xuy√™n, ƒë·∫≠m v·ªã."},
  {id:38,name:"M√¨ x√†o T·ª© Xuy√™n",cat:"trung",price:130000,img:"https://picsum.photos/seed/mi1/800/600",desc:"M√¨ x√†o cay n·ªìng, nhi·ªÅu rau."},
  {id:39,name:"C∆°m chi√™n D∆∞∆°ng Ch√¢u",cat:"trung",price:95000,img:"https://picsum.photos/seed/com1/800/600",desc:"C∆°m chi√™n th·∫≠p c·∫©m truy·ªÅn th·ªëng."},
  {id:40,name:"C√° h·∫•p x√¨ d·∫ßu",cat:"trung",price:180000,img:"https://picsum.photos/seed/cax1/800/600",desc:"C√° h·∫•p c√πng t∆∞∆°ng x√¨ d·∫ßu th∆°m."},
  {id:41,name:"S∆∞·ªùn x√†o chua ng·ªçt",cat:"trung",price:140000,img:"https://picsum.photos/seed/su1/800/600",desc:"S∆∞·ªùn m·ªÅm, s·ªët chua ng·ªçt ƒë·∫≠m ƒë√†."},
  {id:42,name:"T√¥m x√†o b√¥ng c·∫£i",cat:"trung",price:150000,img:"https://picsum.photos/seed/tomx1/800/600",desc:"T√¥m t∆∞∆°i x√†o b√¥ng c·∫£i gi√≤n."},
  {id:43,name:"L·∫©u T·ª© Xuy√™n cay",cat:"trung",price:320000,img:"https://picsum.photos/seed/lautx1/800/600",desc:"L·∫©u cay T·ª© Xuy√™n chu·∫©n v·ªã."},
  {id:44,name:"G√† Kung Pao",cat:"trung",price:140000,img:"https://picsum.photos/seed/kung1/800/600",desc:"G√† kung pao th∆°m, ƒë·∫≠m v·ªã."},
  {id:45,name:"H√° c·∫£o t√¥m th·ªãt",cat:"trung",price:90000,img:"https://picsum.photos/seed/hacao1/800/600",desc:"H√° c·∫£o t√¥m nh√¢n ƒë·∫ßy ƒë·∫∑n."},
  {id:46,name:"Ho√†nh th√°nh chi√™n",cat:"trung",price:85000,img:"https://picsum.photos/seed/hoanh1/800/600",desc:"Ho√†nh th√°nh gi√≤n r·ª•m, h·∫•p d·∫´n."},
  {id:47,name:"M√¨ v·ªãt ti·ªÅm",cat:"trung",price:170000,img:"https://picsum.photos/seed/vitt1/800/600",desc:"M√¨ v·ªãt ti·ªÅm th∆°m, b·ªï d∆∞·ª°ng."},
  {id:48,name:"S∆∞·ªùn b√≤ x√†o t·ªèi",cat:"trung",price:150000,img:"https://picsum.photos/seed/suon2/800/600",desc:"S∆∞·ªùn x√†o t·ªèi th∆°m l·ª´ng."},
  {id:49,name:"Tr·ª©ng h·∫•p t∆∞∆°ng",cat:"trung",price:70000,img:"https://picsum.photos/seed/trung1/800/600",desc:"Tr·ª©ng h·∫•p th∆°m v·ªã t∆∞∆°ng."},
  {id:50,name:"ƒê·∫≠u b·∫Øp x√†o t·ªèi",cat:"trung",price:80000,img:"https://picsum.photos/seed/dau1/800/600",desc:"ƒê·∫≠u b·∫Øp gi√≤n, x√†o t·ªèi ƒë∆°n gi·∫£n."},

  // 10 Drinks
  {id:51,name:"Bia Heineken",cat:"drink",price:35000,img:"https://picsum.photos/seed/bia1/800/600",desc:"Bia m√°t l·∫°nh."},
  {id:52,name:"Bia Tiger",cat:"drink",price:33000,img:"https://picsum.photos/seed/bia2/800/600",desc:"Bia t∆∞∆°i, ƒë·∫≠m v·ªã."},
  {id:53,name:"Bia S√†i G√≤n",cat:"drink",price:30000,img:"https://picsum.photos/seed/bia3/800/600",desc:"Bia truy·ªÅn th·ªëng Vi·ªát."},
  {id:54,name:"N∆∞·ªõc ng·ªçt Coca",cat:"drink",price:18000,img:"https://picsum.photos/seed/coke1/800/600",desc:"N∆∞·ªõc ng·ªçt lon."},
  {id:55,name:"N∆∞·ªõc ng·ªçt Pepsi",cat:"drink",price:17000,img:"https://picsum.photos/seed/pepsi1/800/600",desc:"Pepsi lon."},
  {id:56,name:"N∆∞·ªõc cam t∆∞∆°i",cat:"drink",price:25000,img:"https://picsum.photos/seed/juice1/800/600",desc:"N∆∞·ªõc cam √©p t∆∞∆°i."},
  {id:57,name:"N∆∞·ªõc su·ªëi",cat:"drink",price:12000,img:"https://picsum.photos/seed/water1/800/600",desc:"N∆∞·ªõc su·ªëi ƒë√≥ng chai."},
  {id:58,name:"Tr√† ƒë√°",cat:"drink",price:5000,img:"https://picsum.photos/seed/tea1/800/600",desc:"Tr√† ƒë√° m√°t."},
  {id:59,name:"Cocktail tr√°i c√¢y",cat:"drink",price:60000,img:"https://picsum.photos/seed/cock1/800/600",desc:"Cocktail tr√°i c√¢y."},
  {id:60,name:"R∆∞·ª£u Bold (ly)",cat:"drink",price:80000,img:"https://picsum.photos/seed/wine1/800/600",desc:"Ly r∆∞·ª£u nh·ªè."}
];

let cart = JSON.parse(localStorage.getItem('qh-cart')||'[]');

const menuGrid = document.getElementById('menuGrid');
const cartList = document.getElementById('cartList');
const totalPrice = document.getElementById('totalPrice');
const tabs = document.getElementById('tabs');
const search = document.getElementById('search');
const modal = document.getElementById('modal');

function format(v){ return v.toString().replace(/\B(?=(\d{3})+(?!\d))/g, "."); }

let activeTab = 'viet';

function renderItems(){
  const query = search.value.trim().toLowerCase();
  menuGrid.innerHTML = '';
  const filtered = items.filter(i=> i.cat===activeTab || (activeTab==='drink' && i.cat==='drink'));
  filtered.forEach(it=>{
    if(query && !it.name.toLowerCase().includes(query) && !it.desc.toLowerCase().includes(query)) return;
    const card = document.createElement('div');
    card.className='card';
    card.innerHTML = `
      <img src="${it.img}" alt="${it.name}" loading="lazy">
      <div class="card-body">
        <div class="dish-name">${it.name}</div>
        <div class="dish-cat">${capitalize(it.cat)}</div>
        <div class="row">
          <div class="price">${format(it.price)}‚Ç´</div>
          <div>
            <button class="btn" onclick="openModal(${it.id})">Xem</button>
            <button class="btn" style="background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);" onclick="addToCart(${it.id})">Th√™m</button>
          </div>
        </div>
      </div>
    `;
    menuGrid.appendChild(card);
  });
}

function capitalize(s){ if(!s) return ''; if(s==='viet') return 'M√≥n Vi·ªát'; if(s==='thai') return 'M√≥n Th√°i'; if(s==='trung') return 'M√≥n Trung'; if(s==='drink') return 'ƒê·ªì u·ªëng'; return s; }

function addToCart(id){
  const it = items.find(x=>x.id===id);
  const ex = cart.find(x=>x.id===id);
  if(ex){ ex.qty++; } else { cart.push({id:it.id,name:it.name,price:it.price,qty:1}); }
  saveCart(); renderCart();
}

function saveCart(){ localStorage.setItem('qh-cart', JSON.stringify(cart)); }
function renderCart(){
  cartList.innerHTML='';
  let total=0;
  cart.forEach((c,idx)=>{
    total += c.price*c.qty;
    const node = document.createElement('div');
    node.className='cart-item';
    node.innerHTML = `
      <div style="flex:1">
        <div style="font-weight:700">${c.name}</div>
        <div class="small">${format(c.price)}‚Ç´</div>
      </div>
      <div style="display:flex;align-items:center;gap:8px">
        <div class="qty">
          <button class="btn" style="background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted)" onclick="changeQty(${idx},-1)">-</button>
          <div style="min-width:28px;text-align:center">${c.qty}</div>
          <button class="btn" style="background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted)" onclick="changeQty(${idx},1)">+</button>
        </div>
        <div style="min-width:72px;text-align:right;font-weight:800">${format(c.price*c.qty)}‚Ç´</div>
        <button class="btn" style="background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted)" onclick="removeItem(${idx})">‚úñ</button>
      </div>
    `;
    cartList.appendChild(node);
  });
  totalPrice.textContent = 'T·ªïng: ' + format(total) + '‚Ç´';
}

function changeQty(i,delta){ cart[i].qty += delta; if(cart[i].qty<=0) cart.splice(i,1); saveCart(); renderCart(); }
function removeItem(i){ cart.splice(i,1); saveCart(); renderCart(); }
function clearCart(){ if(!confirm('Xo√° to√†n b·ªô gi·ªè h√†ng?')) return; cart=[]; saveCart(); renderCart(); }

function checkout(){
  if(cart.length===0){ alert('Gi·ªè h√†ng r·ªóng!'); return; }
  const note = document.getElementById('note').value || '';
  let total=0; let list='';
  cart.forEach(c=>{ total+=c.qty*c.price; list += `‚Ä¢ ${c.name} x${c.qty}\n`; });
  const msg = `X√°c nh·∫≠n ƒë∆°n h√†ng:\n\n${list}\nGhi ch√∫: ${note}\n\nT·ªïng: ${format(total)}‚Ç´\n\nOK ƒë·ªÉ ho√†n t·∫•t.`;
  if(confirm(msg)){
    alert('ƒê·∫∑t h√†ng th√†nh c√¥ng! Qu√°n s·∫Ω li√™n h·ªá b·∫°n s·ªõm. C·∫£m ∆°n!');
    cart=[]; saveCart(); renderCart(); document.getElementById('note').value='';
  }
}

// modal detail
function openModal(id){
  const it = items.find(x=>x.id===id);
  if(!it) return;
  document.getElementById('modalImg').src = it.img;
  document.getElementById('modalTitle').textContent = it.name;
  document.getElementById('modalCat').textContent = capitalize(it.cat);
  document.getElementById('modalDesc').textContent = it.desc;
  document.getElementById('modalPrice').textContent = format(it.price) + '‚Ç´';
  document.getElementById('modalAdd').onclick = function(){ addToCart(id); closeModal(); };
  modal.style.display = 'flex';
  modal.removeAttribute('aria-hidden');
}
function closeModal(){ modal.style.display='none'; modal.setAttribute('aria-hidden','true'); }

// search & tabs
document.querySelectorAll('.tab').forEach(t=>{
  t.addEventListener('click',()=>{ document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active')); t.classList.add('active'); activeTab = t.dataset.tab; renderItems(); });
});
search.addEventListener('input',()=>renderItems());

// music toggle
const audio = document.getElementById('bgAudio');
const musicToggle = document.getElementById('musicToggle');
let musicOn = false;
musicToggle.addEventListener('click',()=>{
  if(!musicOn){ audio.volume = 0.12; audio.play().catch(()=>{}); musicToggle.textContent = 'üéµ Nh·∫°c: B·∫≠t'; musicOn=true; }
  else{ audio.pause(); musicToggle.textContent = 'üéµ Nh·∫°c: T·∫Øt'; musicOn=false; }
});

// init
renderItems();
renderCart();
</script>
</body>
</html>
